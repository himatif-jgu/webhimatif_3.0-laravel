<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

    <title>Himatif JGU</title>
    
    <link rel="icon" href="../../assets/images/logo-himatif.png" type="image/x-icon">

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/autonumeric@4.5.4"></script>

    <link href="../../assets/css/font-awesome-all.css" rel="stylesheet">
    <link href="../../assets/css/flaticon.css" rel="stylesheet">
    <link href="../../assets/css/owl.css" rel="stylesheet">
    <link href="../../assets/css/bootstrap.css" rel="stylesheet">
    <link href="../../assets/css/jquery.fancybox.min.css" rel="stylesheet">
    <link href="../../assets/css/animate.css" rel="stylesheet">
    <link href="../../assets/css/nice-select.css" rel="stylesheet">
    <link href="../../assets/css/odometer.css" rel="stylesheet">
    <link href="../../assets/css/elpath.css" rel="stylesheet">
    <link href="../../assets/css/color.css" id="jssDefault" rel="stylesheet">
    <link href="../../assets/css/rtl.css" rel="stylesheet">
    <link href="../../assets/css/style.css" rel="stylesheet">
    <link href="../../assets/css/module-css/header.css" rel="stylesheet">
    <link href="../../assets/css/module-css/page-title.css" rel="stylesheet">
    <link href="../../assets/css/module-css/login.css" rel="stylesheet">
    <link href="../../assets/css/module-css/subscribe.css" rel="stylesheet">
    <link href="../../assets/css/module-css/footer.css" rel="stylesheet">
    <link href="../../assets/css/responsive.css" rel="stylesheet">

    <style>
        /* Mengganti .container-bill menjadi .form-inner agar sesuai dengan HTML template */
        .sign-section .form-inner {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            width: 100%;
            max-width: 600px; /* Disesuaikan agar lebih lebar */
            margin: 0 auto; /* Menengahkan container */
        }
        .form-inner h1 {
            color: #333;
            text-align: center;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 24px;
        }
        .form-inner .input-group {
            margin-bottom: 1.5rem;
        }
        .form-inner label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-inner input[type="text"],
        .form-inner input[type="number"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        .form-inner input[type="text"]:focus,
        .form-inner input[type="number"]:focus {
            outline: none;
            border-color: #228a25;
            box-shadow: 0 0 0 3px rgba(34, 138, 37, 0.1);
        }
        .form-inner .person {
            background-color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .form-inner .person-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .form-inner .person-header input {
            flex-grow: 1;
            margin-right: 10px;
        }
        .form-inner .slider {
            width: 100%;
            margin: 1rem 0;
        }
        .form-inner .person-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .form-inner .btn {
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .form-inner .btn-add {
            background-color: #228a25;
            width: 100%;
        }
        .form-inner .btn-add:hover {
            background-color: #1a681d;
        }
        .form-inner .btn-delete {
            background-color: #ef4444;
            padding: 0.4rem;
            width: 30px;
            height: 30px;
            min-width: 30px;
        }
        .form-inner .btn-delete:hover {
            background-color: #dc2626;
        }
        .form-inner .result {
            margin-top: 1.5rem;
            text-align: left;
            background-color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        .form-inner .result h2 {
            color: #333;
            margin-top: 0;
            font-size: 18px;
        }
        .form-inner .result p {
            display: flex;
            justify-content: space-between;
            margin: 0.5rem 0;
        }
    </style>
</head>

<body>
    <div>
        <div class="loader-wrap">
            <div class="preloader">
                <div class="preloader-close"><i class="icon-27"></i></div>
                <div id="handle-preloader" class="handle-preloader">
                    <div class="animation-preloader">
                        <div class="spinner"></div>
                        <div class="txt-loading">
                            <span data-text-preloader="H" class="letters-loading">H</span>
                            <span data-text-preloader="I" class="letters-loading">I</span>
                            <span data-text-preloader="M" class="letters-loading">M</span>
                            <span data-text-preloader="A" class="letters-loading">A</span>
                            <span data-text-preloader="T" class="letters-loading">T</span>
                            <span data-text-preloader="I" class="letters-loading">I</span>
                            <span data-text-preloader="F" class="letters-loading">F</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <header class="main-header header-style-three">
            <div class="header-top">
                <div class="auto-container">
                    <div class="top-inner">
                        <ul class="info">
                            <li><img src="../../assets/images/icons/icon-6.png" alt="">Call: <a href="tel:+6282124986343">+62 821-2498-6343</a></li>
                            <li><img src="../../assets/images/icons/icon-7.png" alt="">Mail: <a href="mailto:himatif.19@jgu.ac.id">himatif.19@jgu.ac.id</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="header-lower">
                <div class="outer-container">
                    <div class="outer-box">
                        <div class="logo-box">
                            <figure class="logo"><a href="../../index.html"><img src="../../assets/images/logo-3.png" alt=""></a></figure>
                        </div>
                        <div class="menu-area">
                            <div class="mobile-nav-toggler">
                                <i class="icon-bar"></i>
                                <i class="icon-bar"></i>
                                <i class="icon-bar"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="mobile-menu">
            <div class="menu-backdrop"></div>
            <div class="close-btn"><i class="fas fa-times"></i></div>
            <nav class="menu-box">
                <div class="nav-logo"><a href="index.html"><img src="../../assets/images/logo-2.png" alt="" title=""></a></div>
                <div class="menu-outer"></div>
                <div class="contact-info">
                    <h4>Contact Info</h4>
                    <ul>
                        <li><a href="tel:+6282124986343">+62 821-2498-6343</a></li>
                        <li><a href="mailto:himatif.19@jgu.ac.id">himatif.19@jgu.ac.id</a></li>
                    </ul>
                </div>
            </nav>
        </div>
        <section class="page-title centred pt_75">
            <div class="auto-container">
                <div class="content-box">
                    <h1>Split Bill - HIMATIF Apps</h1>
                </div>
            </div>
        </section>
        <section class="sign-section pt_110 pb_120">
            <div class="pattern-layer" style="background-image: url(../assets/images/shape/shape-25.png);"></div>
            <div class="auto-container">
                <div class="form-inner">
                    <h1>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                        </svg>
                        Aplikasi Split Bill
                    </h1>
                    <div class="input-group">
                        <label for="totalBill">Total Tagihan (IDR):</label>
                        <input type="text" id="totalBill" placeholder="Masukkan total tagihan">
                    </div>
                    <div id="peopleContainer"></div>
                    <button class="btn btn-add" onclick="addPerson()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 5v14M5 12h14"></path>
                        </svg>
                        <span class="btn-text">Tambah Orang</span>
                    </button>
                    <div id="result" class="result"></div>
                </div>
            </div>
        </section>

        <footer class="main-footer">
            <div class="widget-section p_relative pt_80 pb_100">
                <div class="auto-container">
                    <div class="row clearfix">
                        <div class="col-lg-4 col-md-6 col-sm-12 footer-column">
                            <div class="footer-widget logo-widget mr_30">
                                <figure class="footer-logo mb_20"><a href="index.html"><img src="../../assets/images/logo-himatif-jgu.png" alt=""></a></figure>
                                <p>HIMATIF JGU is the official student organization dedicated to developing
                                    potential, building networks, and driving innovation in technology for the
                                    Informatics Engineering students of Jakarta Global University.</p>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-12 footer-column">
                            <div class="footer-widget links-widget">
                                <div class="widget-title"><h4>About Us</h4></div>
                                <div class="widget-content">
                                    <ul class="links-list clearfix">
                                        <li><a href="index.html">History</a></li>
                                        <li><a href="index.html">Vision & Mission</a></li>
                                        <li><a href="index.html">Our Structure</a></li>
                                        <li><a href="index.html">The Cabinet</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-12 footer-column">
                            <div class="footer-widget links-widget">
                                <div class="widget-title"><h4>Activities</h4></div>
                                <div class="widget-content">
                                    <ul class="links-list clearfix">
                                        <li><a href="index.html">Programs</a></li>
                                        <li><a href="index.html">Workshops & Training</a></li>
                                        <li><a href="index.html">Competitions</a></li>
                                        <li><a href="index.html">Event Gallery</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-12 footer-column">
                             <div class="footer-widget links-widget">
                                <div class="widget-title"><h4>Quick Links</h4></div>
                                <div class="widget-content">
                                    <ul class="links-list clearfix">
                                        <li><a href="about.html">Membership</a></li>
                                        <li><a href="index.html">Blog & Articles</a></li>
                                        <li><a href="index.html">Partnerships</a></li>
                                        <li><a href="blog.html">Latest News</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-4 col-sm-12 footer-column">
                            <div class="footer-widget links-widget">
                                <div class="widget-title"><h4>Support</h4></div>
                                <div class="widget-content">
                                    <ul class="links-list clearfix">
                                        <li><a href="contact.html">Contact Us</a></li>
                                        <li><a href="faq.html">FAQ</a></li>
                                        <li><a href="index.html">Secretariat Location</a></li>
                                        <li><a href="index.html">Privacy Policy</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="auto-container">
                    <div class="bottom-inner">
                        <div class="copyright">
                            <p>Copyright &copy; 2024 <a href="index.html">HIMATIF Jakarta Global University</a> All
                                rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <div class="scroll-to-top">
            <svg class="scroll-top-inner" viewBox="-1 -1 102 102">
                <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
            </svg>
        </div>
    </div>

    <script src="../../assets/js/jquery.js"></script>
    <script src="../../assets/js/bootstrap.min.js"></script>
    <script src="../../assets/js/owl.js"></script>
    <script src="../../assets/js/wow.js"></script>
    <script src="../../assets/js/validation.js"></script>
    <script src="../../assets/js/jquery.fancybox.js"></script>
    <script src="../../assets/js/appear.js"></script>
    <script src="../../assets/js/isotope.js"></script>
    <script src="../../assets/js/parallax-scroll.js"></script>
    <script src="../../assets/js/jquery.nice-select.min.js"></script>
    <script src="../../assets/js/scrolltop.min.js"></script>
    <script src="../../assets/js/gsap.js"></script>
    <script src="../../assets/js/ScrollTrigger.js"></script>
    <script src="../../assets/js/SplitText.js"></script>
    <script src="../../assets/js/language.js"></script>
    <script src="../../assets/js/jquery-ui.js"></script>
    <script src="../../assets/js/lenis.min.js"></script>
    <script src="../../assets/js/odometer.js"></script>
    <script src="../../assets/js/jquery.lettering.min.js"></script>
    <script src="../../assets/js/jquery.circleType.js"></script>

    <script src="../../assets/js/script.js"></script>
    
    <script>
        let peopleCount = 0;
        const people = [];
        let totalBillInput;

        document.addEventListener('DOMContentLoaded', function () {
            totalBillInput = new AutoNumeric('#totalBill', {
                currencySymbol: 'Rp ',
                decimalCharacter: ',',
                digitGroupSeparator: '.',
                decimalPlaces: 0,
                minimumValue: '0'
            });

            totalBillInput.domElement.addEventListener('input', updateCalculations);
            addPerson(true);
        });

        function addPerson(isFirst = false) {
            peopleCount++;
            const person = {
                id: peopleCount,
                name: `Orang ${peopleCount}`,
                percentage: isFirst ? 100 : 0
            };
            people.push(person);

            const container = document.getElementById('peopleContainer');
            const personDiv = document.createElement('div');
            personDiv.className = 'person';
            personDiv.id = `person-div-${person.id}`;
            personDiv.innerHTML = `
                <div class="person-header">
                    <input type="text" id="name${person.id}" value="${person.name}" onchange="updateName(${person.id}, this.value)">
                    <button class="btn btn-delete" onclick="removePerson(${person.id})">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"></path></svg>
                    </button>
                </div>
                <input type="range" id="slider${person.id}" min="0" max="100" value="${person.percentage}" class="slider" oninput="updatePercentage(${person.id}, this.value)">
                <div class="person-footer">
                    <span id="percentage${person.id}">${person.percentage}%</span>
                    <span id="amount${person.id}" class="amount"></span>
                </div>
            `;
            container.appendChild(personDiv);
            if (!isFirst) {
                redistributeAfterAdd();
            }
            updateCalculations();
        }
        
        function updateName(id, newName) {
            const person = people.find(p => p.id === id);
            if (person) {
                person.name = newName;
                updateCalculations();
            }
        }

        function updatePercentage(id, newPercentage) {
            let changedPerson = people.find(p => p.id === id);
            if (!changedPerson) return;
            
            let newValue = parseInt(newPercentage, 10);
            changedPerson.percentage = newValue;
            
            let totalPercentage = people.reduce((sum, p) => sum + p.percentage, 0);
            let diff = 100 - totalPercentage;

            let otherPeople = people.filter(p => p.id !== id && p.percentage > 0);
            let lastOtherPerson = otherPeople[otherPeople.length -1];
            
            if (otherPeople.length > 0) {
                 otherPeople.forEach(p => {
                    let share = p.percentage / (totalPercentage - newValue);
                    p.percentage += diff * share;
                 });
            }
            
            // Recalculate and fix rounding
            let currentTotal = Math.round(people.reduce((sum, p) => sum + p.percentage, 0));
            let roundingError = 100 - currentTotal;
            if (roundingError !== 0 && people.length > 0) {
                people[0].percentage = Math.max(0, people[0].percentage + roundingError);
            }

            updateUI();
        }
        
        function redistributeAfterAdd() {
            let evenSplit = Math.floor(100 / people.length);
            let remainder = 100 % people.length;

            people.forEach((p, index) => {
                p.percentage = evenSplit + (index < remainder ? 1 : 0);
            });
            updateUI();
        }

        function removePerson(id) {
            if (people.length <= 1) {
                alert("Harus ada minimal satu orang.");
                return;
            }
            const index = people.findIndex(p => p.id === id);
            if (index > -1) {
                people.splice(index, 1);
                const personDiv = document.getElementById(`person-div-${id}`);
                if (personDiv) personDiv.remove();
                redistributeAfterAdd();
            }
        }

        function formatIDR(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount || 0);
        }

        function updateUI() {
            people.forEach(person => {
                const slider = document.getElementById(`slider${person.id}`);
                const percentageSpan = document.getElementById(`percentage${person.id}`);
                const roundedPercentage = Math.round(person.percentage);
                if (slider) slider.value = roundedPercentage;
                if (percentageSpan) percentageSpan.textContent = `${roundedPercentage}%`;
            });
            updateCalculations();
        }

        function updateCalculations() {
            const totalBill = totalBillInput.getNumber() || 0;
            let resultHTML = '<h2>Hasil Pembagian:</h2>';
            
            let calculatedTotal = 0;
            people.forEach((person, index) => {
                let roundedPercentage = Math.round(person.percentage);
                let amount = (totalBill * roundedPercentage) / 100;
                calculatedTotal += amount;
                
                // Final adjustment for the last person to match the total bill due to rounding
                if (index === people.length - 1) {
                    amount += totalBill - calculatedTotal;
                }

                const amountSpan = document.getElementById(`amount${person.id}`);
                if (amountSpan) amountSpan.textContent = formatIDR(amount);
                
                resultHTML += `<p><span>${person.name} (${roundedPercentage}%)</span> <strong>${formatIDR(amount)}</strong></p>`;
            });

            document.getElementById('result').innerHTML = resultHTML;
        }
    </script>
</body>
</html>